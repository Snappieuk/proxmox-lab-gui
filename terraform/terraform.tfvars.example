# Example: CS101 Class Deployment
# Copy this file to terraform.tfvars and customize

# Proxmox credentials
proxmox_api_url      = "https://10.220.15.249:8006/api2/json"
proxmox_user         = "root@pam"
proxmox_password     = "password!"  # Better: use TF_VAR_proxmox_password env var
proxmox_tls_insecure = true

# Class configuration
class_id     = "cs101"
class_prefix = "cs101"

# Students (Terraform will create one VM per entry)
students = {
  "student1"  = { role = "default" }
  "student2"  = { role = "default" }
  "student3"  = { role = "default" }
  "student4"  = { role = "default" }
  "student5"  = { role = "default" }
  "student6"  = { role = "default" }
  "student7"  = { role = "default" }
  "student8"  = { role = "default" }
  "student9"  = { role = "default" }
  "student10" = { role = "default" }
}

# Template configuration
template_name   = "ubuntu-22.04-template"  # Must exist in Proxmox
use_full_clone  = false                     # Use linked clones for efficiency

# VM resources (adjust based on your needs)
vm_cores  = 2
vm_memory = 2048  # MB
disk_size = "32G"

# Storage
storage_pool = "local-lvm"

# Network
network_bridge = "vmbr0"
use_dhcp       = true  # or false for static IPs

# Node distribution (VMs spread across these nodes)
node_distribution = ["pve1", "pve2"]
# Or deploy all to one node:
# target_node = "pve1"

# Teacher VM
create_teacher_vm   = true
teacher_cores       = 4      # 0 = auto (2x student)
teacher_memory      = 4096   # 0 = auto (2x student)
teacher_disk_size   = "64G"  # empty = same as student

# Cloud-init (optional)
default_user     = "student"
ssh_public_keys  = ""  # Add your SSH public key here
