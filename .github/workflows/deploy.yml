name: Auto Deploy

on:
  push:
    branches: [ main ]

jobs:
  deploy:
    runs-on: self-hosted
    steps:
      - name: Pull and restart
        run: |
          cd ~/rdp-gen
          git pull origin main
          pkill -f "python.*app.py"
          nohup python3 app.py > app.log 2>&1 &
